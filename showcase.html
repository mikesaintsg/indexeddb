<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IndexedDB Showcase</title>
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();class y extends Error{code;cause;constructor(t,e,s){super(e),this.name="DatabaseError",this.code=t,this.cause=s,Object.setPrototypeOf(this,new.target.prototype)}}class S extends y{storeName;key;constructor(t,e){const s=$(e);super("NOT_FOUND",`Record not found in "${t}" with key: ${s}`),this.name="NotFoundError",this.storeName=t,this.key=e}}class W extends y{storeName;key;constructor(t,e,s){const n=$(e);super("CONSTRAINT_ERROR",`Key already exists in "${t}": ${n}`,s),this.name="ConstraintError",this.storeName=t,this.key=e}}class Y extends y{constructor(t){super("QUOTA_EXCEEDED","Storage quota exceeded",t),this.name="QuotaExceededError"}}class v extends y{constructor(t,e,s){super(t,e,s),this.name="TransactionError"}}class q extends y{constructor(t,e,s){super(t,e,s),this.name="UpgradeError"}}class J extends y{constructor(t,e){super("OPEN_FAILED",t,e),this.name="OpenError"}}class X extends y{constructor(t,e){super("DATA_ERROR",t,e),this.name="DataError"}}class z extends y{constructor(t,e){super("READ_ONLY",t,e),this.name="ReadOnlyError"}}class Z extends y{constructor(t,e){super("VERSION_ERROR",t,e),this.name="VersionError"}}class P extends y{constructor(t,e){super("INVALID_STATE",t,e),this.name="InvalidStateError"}}class tt extends y{constructor(t,e){super("TIMEOUT",t,e),this.name="TimeoutError"}}function m(r,t){if(!r)return new y("UNKNOWN_ERROR","Unknown error occurred");const e=t?.storeName??"",s=t?.key??"";switch(r.name){case"ConstraintError":return new W(e,s,r);case"QuotaExceededError":return new Y(r);case"TransactionInactiveError":return new v("TRANSACTION_INACTIVE",r.message||"Transaction is not active",r);case"AbortError":return new v("TRANSACTION_ABORTED",r.message||"Transaction was aborted",r);case"VersionError":return new Z(r.message||"Version error",r);case"DataError":return new X(r.message||"Data error",r);case"InvalidStateError":return new P(r.message||"Invalid state",r);case"ReadOnlyError":return new z(r.message||"Attempted write in read-only transaction",r);case"NotFoundError":return new y("NOT_FOUND",r.message||"Object store or index not found",r);case"TimeoutError":return new tt(r.message||"Operation timed out",r);default:return new y("UNKNOWN_ERROR",r.message||`Unknown error: ${r.name}`,r)}}function $(r){return typeof r=="string"?`"${r}"`:typeof r=="number"?String(r):r instanceof Date?r.toISOString():Array.isArray(r)?`[${r.map($).join(", ")}]`:r instanceof ArrayBuffer||ArrayBuffer.isView(r)?"[Binary Data]":String(r)}const V="id",U=!1,C={DATABASE_NOT_OPEN:"Database connection is not open",DATABASE_CLOSED:"Database connection has been closed",STORE_NOT_FOUND:r=>`Object store "${r}" not found`,INDEX_NOT_FOUND:r=>`Index "${r}" not found`,TRANSACTION_INACTIVE:"Transaction is no longer active",TRANSACTION_MODE_MISMATCH:"Operation requires readwrite transaction",INVALID_KEY:"Invalid key type for this operation",NATIVE_ACCESS_NO_TRANSACTION:"Native store access requires active transaction",UPGRADE_BLOCKED:"Database upgrade blocked by other connections",UPGRADE_FAILED:"Database upgrade failed",OPEN_FAILED:"Failed to open database"};function M(r){return new Promise((t,e)=>{r.oncomplete=()=>t(),r.onerror=()=>{e(m(r.error))},r.onabort=()=>{e(new v("TRANSACTION_ABORTED",r.error?.message??"Transaction was aborted",r.error))}})}function _(r){return Array.isArray(r)?r:[r]}function et(r){return typeof r=="number"&&Number.isInteger(r)&&r>0}function st(r){if(!et(r))throw new Error(`Database version must be a positive integer, got: ${String(r)}`)}function nt(r){if(r.length===0)throw new Error("Database name must be a non-empty string")}function f(r){return r===void 0?"next":r==="previous"?"prev":r==="previousunique"?"prevunique":r}function H(r){return r==="prev"?"previous":r==="prevunique"?"previousunique":r}class A{#e;#t;constructor(t,e){this.#e=t,this.#t=e}get native(){return this.#e}getKey(){return this.#e.key}getPrimaryKey(){return this.#e.primaryKey}getValue(){return this.#e.value}getDirection(){return H(this.#e.direction)}async continue(t){return new Promise((e,s)=>{this.#t.onsuccess=()=>{const n=this.#t.result;e(n?new A(n,this.#t):null)},this.#t.onerror=()=>s(m(this.#t.error)),t!==void 0?this.#e.continue(t):this.#e.continue()})}async continuePrimaryKey(t,e){return new Promise((s,n)=>{this.#t.onsuccess=()=>{const o=this.#t.result;s(o?new A(o,this.#t):null)},this.#t.onerror=()=>n(m(this.#t.error)),this.#e.continuePrimaryKey(t,e)})}async advance(t){return new Promise((e,s)=>{this.#t.onsuccess=()=>{const n=this.#t.result;e(n?new A(n,this.#t):null)},this.#t.onerror=()=>s(m(this.#t.error)),this.#e.advance(t)})}async update(t){return new Promise((e,s)=>{const n=this.#e.update(t);n.onsuccess=()=>e(n.result),n.onerror=()=>s(m(n.error))})}async delete(){return new Promise((t,e)=>{const s=this.#e.delete();s.onsuccess=()=>t(),s.onerror=()=>e(m(s.error))})}}class x{#e;#t;constructor(t,e){this.#e=t,this.#t=e}get native(){return this.#e}getKey(){return this.#e.key}getPrimaryKey(){return this.#e.primaryKey}getDirection(){return H(this.#e.direction)}async continue(t){return new Promise((e,s)=>{this.#t.onsuccess=()=>{const n=this.#t.result;e(n?new x(n,this.#t):null)},this.#t.onerror=()=>s(m(this.#t.error)),t!==void 0?this.#e.continue(t):this.#e.continue()})}async continuePrimaryKey(t,e){return new Promise((s,n)=>{this.#t.onsuccess=()=>{const o=this.#t.result;s(o?new x(o,this.#t):null)},this.#t.onerror=()=>n(m(this.#t.error)),this.#e.continuePrimaryKey(t,e)})}async advance(t){return new Promise((e,s)=>{this.#t.onsuccess=()=>{const n=this.#t.result;e(n?new x(n,this.#t):null)},this.#t.onerror=()=>s(m(this.#t.error)),this.#e.advance(t)})}}function rt(){return{keyPath:null,range:null,anyOfValues:null,filters:[],direction:"ascending",limitCount:null,offsetCount:0}}class h{#e;#t;constructor(t,e){this.#e=t,this.#t=e??rt()}where(t){return new ot(this.#e,{...this.#t,keyPath:t})}filter(t){return new h(this.#e,{...this.#t,filters:[...this.#t.filters,t]})}orderBy(t){return new h(this.#e,{...this.#t,direction:t})}limit(t){return new h(this.#e,{...this.#t,limitCount:t})}offset(t){return new h(this.#e,{...this.#t,offsetCount:t})}async toArray(){const t=[];for await(const e of this.iterate())t.push(e);return t}async first(){const t=new h(this.#e,{...this.#t,limitCount:1});for await(const e of t.iterate())return e}async count(){if(this.#t.filters.length===0&&this.#t.anyOfValues===null){const n=(await this.#e.ensureOpen()).transaction([this.#e.storeName],"readonly").objectStore(this.#e.storeName),a=this.#s(n).count(this.#t.range??void 0);return this.#i(a)}let t=0;for await(const e of this.iterate())t++;return t}async keys(){const t=[],n=(await this.#e.ensureOpen()).transaction([this.#e.storeName],"readonly").objectStore(this.#e.storeName),o=this.#s(n),a=f(this.#t.direction==="ascending"?"next":"previous");if(this.#t.anyOfValues!==null){const T=await this.#a(n);return this.#d(T)}const i=o.openKeyCursor(this.#t.range??void 0,a);let c=0,d=0,l=await this.#i(i);for(;l;){if(c<this.#t.offsetCount){c++,l.continue(),l=await this.#i(i);continue}if(this.#t.limitCount!==null&&d>=this.#t.limitCount)break;if(this.#t.filters.length>0){const T=n.get(l.primaryKey),g=await this.#i(T);g!==void 0&&this.#r(g)&&(t.push(l.primaryKey),d++)}else t.push(l.primaryKey),d++;l.continue(),l=await this.#i(i)}return t}async*iterate(){const s=(await this.#e.ensureOpen()).transaction([this.#e.storeName],"readonly").objectStore(this.#e.storeName);if(this.#t.anyOfValues!==null){const l=await this.#n(s),T=this.#d(l);for(const g of T)yield g;return}const n=this.#s(s),o=f(this.#t.direction==="ascending"?"next":"previous"),a=n.openCursor(this.#t.range??void 0,o);let i=0,c=0,d=await this.#i(a);for(;d;){const l=d.value;if(!this.#r(l)){d.continue(),d=await this.#i(a);continue}if(i<this.#t.offsetCount){i++,d.continue(),d=await this.#i(a);continue}if(this.#t.limitCount!==null&&c>=this.#t.limitCount)break;yield l,c++,d.continue(),d=await this.#i(a)}}#s(t){const e=this.#t.keyPath;if(e===null||e===this.#e.primaryKeyPath)return t;if(this.#e.indexNames.includes(e))return t.index(e);for(const s of this.#e.indexNames)try{const n=t.index(s);if(n.keyPath===e)return n}catch{}return t}#r(t){for(const e of this.#t.filters)if(!e(t))return!1;return!0}async#n(t){if(this.#t.anyOfValues===null)return[];const e=this.#t.keyPath,s=new Map,n=this.#t.anyOfValues.map(async a=>{let i=[];if(e===null||e===this.#e.primaryKeyPath){const c=await this.#i(t.get(a));i=c?[c]:[]}else if(this.#e.indexNames.includes(e)){const c=t.index(e);i=await this.#i(c.getAll(a))}else for(const c of this.#e.indexNames)try{const d=t.index(c);if(d.keyPath===e){i=await this.#i(d.getAll(a));break}}catch{}for(const c of i)if(this.#r(c)){const d=this.#o(c);d!==void 0&&s.set(this.#c(d),c)}});await Promise.all(n);const o=Array.from(s.values());return this.#t.direction==="descending"&&o.reverse(),o}async#a(t){if(this.#t.anyOfValues===null)return[];const e=this.#t.keyPath,s=new Set,n=[],o=this.#t.anyOfValues.map(async a=>{let i;if(e===null||e===this.#e.primaryKeyPath)i=await this.#i(t.count(a))>0?[a]:[];else if(this.#e.indexNames.includes(e)){const c=t.index(e);i=await this.#i(c.getAllKeys(a))}else i=[];for(const c of i){const d=this.#c(c);s.has(d)||(s.add(d),n.push(c))}});return await Promise.all(o),this.#t.direction==="descending"&&n.reverse(),n}#o(t){const e=this.#e.primaryKeyPath;if(!(e===null||typeof t!="object"||t===null))return t[e]}#d(t){let e=t;return this.#t.offsetCount>0&&(e=e.slice(this.#t.offsetCount)),this.#t.limitCount!==null&&(e=e.slice(0,this.#t.limitCount)),e}#i(t){return new Promise((e,s)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>s(m(t.error,{storeName:this.#e.storeName}))})}#c(t){return typeof t=="string"?t:typeof t=="number"?`n:${t}`:t instanceof Date?`d:${t.getTime()}`:t instanceof ArrayBuffer?`b:${Array.from(new Uint8Array(t)).join(",")}`:ArrayBuffer.isView(t)?`b:${Array.from(new Uint8Array(t.buffer)).join(",")}`:Array.isArray(t)?`a:${JSON.stringify(t)}`:JSON.stringify(t)}}class ot{#e;#t;constructor(t,e){this.#e=t,this.#t=e}equals(t){return new h(this.#e,{...this.#t,range:IDBKeyRange.only(t)})}greaterThan(t){return new h(this.#e,{...this.#t,range:IDBKeyRange.lowerBound(t,!0)})}greaterThanOrEqual(t){return new h(this.#e,{...this.#t,range:IDBKeyRange.lowerBound(t,!1)})}lessThan(t){return new h(this.#e,{...this.#t,range:IDBKeyRange.upperBound(t,!0)})}lessThanOrEqual(t){return new h(this.#e,{...this.#t,range:IDBKeyRange.upperBound(t,!1)})}between(t,e,s){return new h(this.#e,{...this.#t,range:IDBKeyRange.bound(t,e,s?.lowerOpen??!1,s?.upperOpen??!1)})}startsWith(t){return new h(this.#e,{...this.#t,range:IDBKeyRange.bound(t,t+"Ôøø",!1,!1)})}anyOf(t){return new h(this.#e,{...this.#t,anyOfValues:t})}}class F{#e;#t;#s;#r;constructor(t,e,s,n){this.#e=t,this.#t=e,this.#s=s,this.#r=n}get native(){throw new Error("Index.native requires active transaction. Use openCursor() or iterate().")}getName(){return this.#t}getKeyPath(){return this.#s.keyPath}isUnique(){return this.#s.unique??!1}isMultiEntry(){return this.#s.multiEntry??!1}async get(t){const o=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t);return Array.isArray(t)?await Promise.all(t.map(a=>this.#n(o.get(a)))):this.#n(o.get(t))}async resolve(t){const o=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t);if(Array.isArray(t))return await Promise.all(t.map(async i=>{const c=await this.#n(o.get(i));if(c===void 0)throw new S(this.#e,i);return c}));const a=await this.#n(o.get(t));if(a===void 0)throw new S(this.#e,t);return a}async getKey(t){const o=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t);return this.#n(o.getKey(t))}async all(t,e){const a=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t);return this.#n(a.getAll(t??void 0,e))}async keys(t,e){const a=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t);return this.#n(a.getAllKeys(t??void 0,e))}async count(t){const o=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t);return this.#n(o.count(t))}query(){return new h({storeName:this.#e,primaryKeyPath:null,indexNames:[this.#t],ensureOpen:this.#r})}async*iterate(t){const o=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t),a=f(t?.direction),i=o.openCursor(t?.query??null,a);let c=await this.#n(i);for(;c;){yield c.value;const d=new Promise(l=>{i.onsuccess=()=>l(i.result)});c.continue(),c=await d}}async*iterateKeys(t){const o=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t),a=f(t?.direction),i=o.openKeyCursor(t?.query??null,a);let c=await this.#n(i);for(;c;){yield c.key;const d=new Promise(l=>{i.onsuccess=()=>l(i.result)});c.continue(),c=await d}}async openCursor(t){const o=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t),a=f(t?.direction),i=o.openCursor(t?.query??null,a),c=await this.#n(i);return c?new A(c,i):null}async openKeyCursor(t){const o=(await this.#r()).transaction([this.#e],"readonly").objectStore(this.#e).index(this.#t),a=f(t?.direction),i=o.openKeyCursor(t?.query??null,a),c=await this.#n(i);return c?new x(c,i):null}#n(t){return new Promise((e,s)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>s(m(t.error,{storeName:this.#e}))})}}class it{#e;#t;#s;#r=new Set;constructor(t,e,s){this.#e=t,this.#t=e,this.#s=s}get native(){throw new Error(C.NATIVE_ACCESS_NO_TRANSACTION)}getName(){return this.#t}getKeyPath(){return this.#s.keyPath===void 0?V:this.#s.keyPath}getIndexNames(){return(this.#s.indexes??[]).map(t=>t.name)}hasAutoIncrement(){return this.#s.autoIncrement??U}async get(t){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t);return Array.isArray(t)?await Promise.all(t.map(o=>this.#n(n.get(o)))):this.#n(n.get(t))}async resolve(t){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t);if(Array.isArray(t))return await Promise.all(t.map(async a=>{const i=await this.#n(n.get(a));if(i===void 0)throw new S(this.#t,a);return i}));const o=await this.#n(n.get(t));if(o===void 0)throw new S(this.#t,t);return o}async has(t){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t);return Array.isArray(t)?await Promise.all(t.map(async a=>await this.#n(n.count(a))>0)):await this.#n(n.count(t))>0}async set(t,e){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readwrite"),o=n.objectStore(this.#t);if(Array.isArray(t)){const i=await Promise.all(t.map(c=>this.#n(o.put(c))));return await this.#a(n),this.#o("set",i),i}const a=await this.#n(o.put(t,e));return await this.#a(n),this.#o("set",[a]),a}async add(t,e){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readwrite"),o=n.objectStore(this.#t);if(Array.isArray(t)){const i=await Promise.all(t.map(c=>this.#n(o.add(c))));return await this.#a(n),this.#o("add",i),i}const a=await this.#n(o.add(t,e));return await this.#a(n),this.#o("add",[a]),a}async remove(t){const s=(await this.#e.ensureOpen()).transaction([this.#t],"readwrite"),n=s.objectStore(this.#t);if(Array.isArray(t)){await Promise.all(t.map(o=>this.#n(n.delete(o)))),await this.#a(s),this.#o("remove",t.map(o=>o));return}await this.#n(n.delete(t)),await this.#a(s),this.#o("remove",[t])}async all(t,e){const o=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t);return this.#n(o.getAll(t??void 0,e))}async keys(t,e){const o=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t);return this.#n(o.getAllKeys(t??void 0,e))}async clear(){const e=(await this.#e.ensureOpen()).transaction([this.#t],"readwrite"),s=e.objectStore(this.#t);await this.#n(s.clear()),await this.#a(e),this.#o("clear",[])}async count(t){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t);return this.#n(n.count(t))}index(t){const s=(this.#s.indexes??[]).find(n=>n.name===t);if(!s)throw new Error(`Index "${t}" not found on store "${this.#t}"`);return new F(this.#t,t,s,()=>this.#e.ensureOpen())}query(){const t=this.getKeyPath();return new h({storeName:this.#t,primaryKeyPath:typeof t=="string"?t:null,indexNames:this.getIndexNames(),ensureOpen:()=>this.#e.ensureOpen()})}async*iterate(t){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t),o=f(t?.direction),a=n.openCursor(t?.query??null,o);let i=await this.#n(a);for(;i;){yield i.value;const c=new Promise(d=>{a.onsuccess=()=>d(a.result)});i.continue(),i=await c}}async*iterateKeys(t){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t),o=f(t?.direction),a=n.openKeyCursor(t?.query??null,o);let i=await this.#n(a);for(;i;){yield i.key;const c=new Promise(d=>{a.onsuccess=()=>d(a.result)});i.continue(),i=await c}}async openCursor(t){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t),o=f(t?.direction),a=n.openCursor(t?.query??null,o),i=await this.#n(a);return i?new A(i,a):null}async openKeyCursor(t){const n=(await this.#e.ensureOpen()).transaction([this.#t],"readonly").objectStore(this.#t),o=f(t?.direction),a=n.openKeyCursor(t?.query??null,o),i=await this.#n(a);return i?new x(i,a):null}onChange(t){return this.#r.add(t),()=>this.#r.delete(t)}#n(t){return new Promise((e,s)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>s(m(t.error,{storeName:this.#t}))})}#a(t){return new Promise((e,s)=>{t.oncomplete=()=>e(),t.onerror=()=>s(m(t.error)),t.onabort=()=>s(m(t.error))})}#o(t,e){const s={storeName:this.#t,type:t,keys:e,source:"local"};for(const n of this.#r)try{n(s)}catch{}this.#e.emitChange(s)}emitRemoteChange(t){for(const e of this.#r)try{e(t)}catch{}}}class at{#e;#t;constructor(t,e){this.#e=t,this.#t=e}get native(){return this.#e}async get(t){return Array.isArray(t)?Promise.all(t.map(e=>this.#s(this.#e.get(e)))):this.#s(this.#e.get(t))}async resolve(t){if(Array.isArray(t))return Promise.all(t.map(async s=>{const n=await this.#s(this.#e.get(s));if(n===void 0)throw new S(this.#t,s);return n}));const e=await this.#s(this.#e.get(t));if(e===void 0)throw new S(this.#t,t);return e}async set(t,e){return Array.isArray(t)?Promise.all(t.map(s=>this.#s(this.#e.put(s)))):this.#s(this.#e.put(t,e))}async add(t,e){return Array.isArray(t)?Promise.all(t.map(s=>this.#s(this.#e.add(s)))):this.#s(this.#e.add(t,e))}async remove(t){if(Array.isArray(t)){await Promise.all(t.map(e=>this.#s(this.#e.delete(e))));return}await this.#s(this.#e.delete(t))}async all(t,e){return this.#s(this.#e.getAll(t??void 0,e))}async keys(t,e){return this.#s(this.#e.getAllKeys(t??void 0,e))}async clear(){await this.#s(this.#e.clear())}async count(t){return this.#s(this.#e.count(t))}index(t){if(!this.#e.indexNames.contains(t))throw new Error(`Index "${t}" not found on store "${this.#t}"`);const e=this.#e.index(t),s={name:e.name,keyPath:e.keyPath,unique:e.unique,multiEntry:e.multiEntry},n=this.#e.transaction.db;return new F(this.#t,t,s,()=>Promise.resolve(n))}async openCursor(t){const e=f(t?.direction),s=this.#e.openCursor(t?.query??null,e),n=await this.#s(s);return n?new A(n,s):null}async openKeyCursor(t){const e=f(t?.direction),s=this.#e.openKeyCursor(t?.query??null,e),n=await this.#s(s);return n?new x(n,s):null}#s(t){return new Promise((e,s)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>s(m(t.error,{storeName:this.#t}))})}}class K{#e;#t;#s=!0;#r=!1;constructor(t){this.#e=t,this.#t=Array.from(t.objectStoreNames),t.oncomplete=()=>{this.#s=!1,this.#r=!0},t.onabort=()=>{this.#s=!1,this.#r=!0},t.onerror=()=>{this.#s=!1,this.#r=!0}}get native(){return this.#e}getMode(){return this.#e.mode}getStoreNames(){return this.#t}isActive(){return this.#s}isFinished(){return this.#r}store(t){if(!this.#t.includes(t))throw new v("INVALID_STATE",`Store "${t}" is not in transaction scope. Scoped stores: ${this.#t.join(", ")}`);if(!this.#s)throw new v("TRANSACTION_INACTIVE","Transaction is no longer active");const e=this.#e.objectStore(t);return new at(e,t)}abort(){if(this.#r)throw new v("INVALID_STATE","Cannot abort: transaction already finished");this.#e.abort(),this.#s=!1,this.#r=!0}commit(){if(this.#r)throw new v("INVALID_STATE","Cannot commit: transaction already finished");typeof this.#e.commit=="function"&&this.#e.commit()}}class ct{#e;#t;#s;#r;#n;#a;#o=null;#d=null;#i=!1;#c=null;#l=new Set;#h=new Set;#m=new Set;#u=new Set;#y=new Map;constructor(t){nt(t.name),st(t.version),this.#e=t.name,this.#t=t.version,this.#s=t.stores,this.#r=t.migrations??[],this.#n=t.onBlocked,this.#a=t.crossTabSync!==!1,this.#a&&typeof BroadcastChannel<"u"&&(this.#c=new BroadcastChannel(`idb:${t.name}`),this.#c.onmessage=e=>{this.#f(e.data)}),this.#e=t.name,this.#t=t.version,this.#s=t.stores,this.#r=t.migrations??[],this.#n=t.onBlocked,t.onChange&&this.#l.add(t.onChange),t.onError&&this.#h.add(t.onError),t.onVersionChange&&this.#m.add(t.onVersionChange),t.onClose&&this.#u.add(t.onClose)}get native(){if(!this.#o)throw new P(C.DATABASE_NOT_OPEN);return this.#o}getName(){return this.#e}getVersion(){return this.#t}getStoreNames(){return this.#o?Array.from(this.#o.objectStoreNames):Object.keys(this.#s)}isOpen(){return this.#o!==null&&!this.#i}store(t){if(!(t in this.#s))throw new P(C.STORE_NOT_FOUND(t));let e=this.#y.get(t);return e||(e=new it(this,t,this.#s[t]),this.#y.set(t,e)),e}async read(t,e){const s=await this.ensureOpen(),n=_(t),o=s.transaction([...n],"readonly"),a=new K(o);try{await e(a),await M(o)}catch(i){if(a.isActive())try{a.abort()}catch{}throw i}}async write(t,e,s){const n=await this.ensureOpen(),o=_(t),a=s?.durability?{durability:s.durability}:void 0,i=[...o],c=a?n.transaction(i,"readwrite",a):n.transaction(i,"readwrite"),d=new K(c);try{await e(d),await M(c)}catch(l){if(d.isActive())try{d.abort()}catch{}throw l}}close(){this.#c&&(this.#c.close(),this.#c=null),this.#o&&(this.#o.close(),this.#o=null),this.#i=!0,this.#d=null;for(const t of this.#u)try{t()}catch{}}async drop(){return this.close(),new Promise((t,e)=>{const s=indexedDB.deleteDatabase(this.#e);s.onsuccess=()=>t(),s.onerror=()=>e(m(s.error)),s.onblocked=()=>{}})}onChange(t){return this.#l.add(t),()=>this.#l.delete(t)}onError(t){return this.#h.add(t),()=>this.#h.delete(t)}onVersionChange(t){return this.#m.add(t),()=>this.#m.delete(t)}onClose(t){return this.#u.add(t),()=>this.#u.delete(t)}async ensureOpen(){if(this.#i)throw new P(C.DATABASE_CLOSED);if(this.#o)return this.#o;if(this.#d)return this.#d;this.#d=this.#g();try{return this.#o=await this.#d,this.#o}catch(t){throw this.#d=null,t}}emitChange(t){for(const e of this.#l)try{e(t)}catch(s){this.#p(s instanceof Error?s:new Error(String(s)))}if(t.source==="local"&&this.#c)try{this.#c.postMessage(t)}catch{}}#f(t){const e={...t,source:"remote"};for(const n of this.#l)try{n(e)}catch(o){this.#p(o instanceof Error?o:new Error(String(o)))}const s=this.#y.get(t.storeName);s&&s.emitRemoteChange(e)}async#g(){return new Promise((t,e)=>{const s=indexedDB.open(this.#e,this.#t);s.onerror=()=>{e(new J(`Failed to open database "${this.#e}"`,s.error))},s.onsuccess=()=>{const n=s.result;this.#w(n),t(n)},s.onupgradeneeded=n=>{const o=s.result,a=s.transaction;if(!a){e(new q("UPGRADE_FAILED","No transaction available during upgrade"));return}try{this.#b(o,a,n.oldVersion,n.newVersion??this.#t)}catch(i){a.abort(),e(i instanceof q?i:new q("UPGRADE_FAILED",i instanceof Error?i.message:"Upgrade failed",i))}},s.onblocked=n=>{this.#n&&this.#n({oldVersion:n.oldVersion,newVersion:n.newVersion??this.#t})}})}#w(t){t.onversionchange=e=>{for(const s of this.#m)try{s({oldVersion:e.oldVersion,newVersion:e.newVersion})}catch{}},t.onclose=()=>{this.#o=null,this.#i=!0;for(const e of this.#u)try{e()}catch{}},t.onerror=e=>{const n=e.target?.error??new Error("Unknown database error");this.#p(n instanceof Error?n:new Error(String(n)))}}#b(t,e,s,n){for(const[a,i]of Object.entries(this.#s))t.objectStoreNames.contains(a)||this.#v(t,a,i);const o=this.#r.filter(a=>a.version>s&&a.version<=n).sort((a,i)=>a.version-i.version);for(const a of o)a.migrate({database:t,transaction:e,oldVersion:s,newVersion:n})}#v(t,e,s){const n=s.keyPath===void 0?V:s.keyPath,a={autoIncrement:s.autoIncrement??U};n!==null&&(a.keyPath=n);const i=t.createObjectStore(e,a);for(const c of s.indexes??[])this.#E(i,c)}#E(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique??!1,multiEntry:e.multiEntry??!1})}#p(t){for(const e of this.#h)try{e(t)}catch{}}}function dt(r){return new ct(r)}const lt=[{id:"t1",title:"Learn IndexedDB basics",completed:!0,priority:"high",createdAt:Date.now()-864e5*3},{id:"t2",title:"Build a todo app",completed:!0,priority:"high",createdAt:Date.now()-864e5*2},{id:"t3",title:"Implement cross-tab sync",completed:!1,priority:"medium",createdAt:Date.now()-864e5},{id:"t4",title:"Write documentation",completed:!1,priority:"medium",createdAt:Date.now()-36e5},{id:"t5",title:"Add more examples",completed:!1,priority:"low",createdAt:Date.now()}],ut=[{id:"n1",title:"Meeting Notes",content:"Discuss Q4 goals and roadmap",color:"#fff3cd",updatedAt:Date.now()-864e5},{id:"n2",title:"Shopping List",content:"Milk, Bread, Eggs, Coffee",color:"#d1ecf1",updatedAt:Date.now()-36e5},{id:"n3",title:"Ideas",content:"New project concepts for 2026",color:"#d4edda",updatedAt:Date.now()-18e5},{id:"n4",title:"Reminders",content:"Call dentist, Pay bills",color:"#f8d7da",updatedAt:Date.now()}],u=dt({name:"showcase-app",version:1,stores:{todos:{indexes:[{name:"byCompleted",keyPath:"completed"},{name:"byPriority",keyPath:"priority"},{name:"byCreatedAt",keyPath:"createdAt"}]},notes:{indexes:[{name:"byColor",keyPath:"color"},{name:"byUpdatedAt",keyPath:"updatedAt"}]}},crossTabSync:!0});let E="todos";const N=[];function D(){return Math.random().toString(36).slice(2,11)}function O(r){const t=document.createElement("div");return t.textContent=r,t.innerHTML}function R(r){return new Date(r).toLocaleString()}function Q(r){switch(r){case"high":return"üî¥";case"medium":return"üü°";case"low":return"üü¢";default:return"‚ö™"}}function ht(){u.onChange(r=>{N.unshift(r),N.length>100&&N.pop(),k()})}function k(){const r=document.getElementById("event-log-content");if(r){if(N.length===0){r.innerHTML='<p class="placeholder">No events yet. Make some changes!</p>';return}r.innerHTML=`<ul class="event-list">
		${N.slice(0,20).map(t=>{const e=new Date().toLocaleTimeString();return`<li class="${t.source==="remote"?"remote":"local"}">
				<span class="event-time">${e}</span>
				<span class="event-source">${t.source.toUpperCase()}</span>
				<span class="event-type">${t.type}</span>
				<span class="event-store">${t.storeName}</span>
				<span class="event-keys">[${t.keys.slice(0,3).join(", ")}${t.keys.length>3?"...":""}]</span>
			</li>`}).join("")}
	</ul>`}}function G(){const r=document.getElementById("app");r&&(r.innerHTML=`
		<div class="container">
			<header>
				<h1>üóÑÔ∏è IndexedDB Showcase</h1>
				<p>Interactive demo of @mikesaintsg/indexeddb features</p>
			</header>

			<nav class="tabs">
				<button class="tab ${E==="todos"?"active":""}" data-tab="todos">üìã Todos</button>
				<button class="tab ${E==="notes"?"active":""}" data-tab="notes">üìù Notes</button>
				<button class="tab ${E==="query"?"active":""}" data-tab="query">üîç Query Builder</button>
				<button class="tab ${E==="events"?"active":""}" data-tab="events">üì° Live Events</button>
			</nav>

			<main id="content"></main>

			<footer>
				<p>üí° Open this page in another tab to see cross-tab sync in action!</p>
			</footer>
		</div>
	`,mt(),wt())}function mt(){const r=document.getElementById("content");if(r)switch(E){case"todos":r.innerHTML=yt(),b();break;case"notes":r.innerHTML=pt(),I();break;case"query":r.innerHTML=ft();break;case"events":r.innerHTML=gt();break}}function yt(){return`
		<section class="card">
			<h2>Todo List ‚Äî CRUD Operations</h2>
			<p class="subtitle">Demonstrates: <code>add()</code>, <code>set()</code>, <code>get()</code>, <code>remove()</code>, <code>all()</code></p>

			<div class="form-row">
				<input type="text" id="todo-title" placeholder="What needs to be done?" />
				<select id="todo-priority">
					<option value="low">üü¢ Low</option>
					<option value="medium" selected>üü° Medium</option>
					<option value="high">üî¥ High</option>
				</select>
				<button id="add-todo" class="btn primary">Add Todo</button>
			</div>

			<div class="action-row">
				<button id="load-samples" class="btn secondary">Load Sample Todos</button>
				<button id="clear-completed" class="btn warning">Clear Completed</button>
				<button id="clear-todos" class="btn danger">Clear All</button>
			</div>

			<div class="filter-row">
				<button class="filter-btn active" data-filter="all">All</button>
				<button class="filter-btn" data-filter="active">Active</button>
				<button class="filter-btn" data-filter="completed">Completed</button>
			</div>

			<div id="todo-list" class="todo-list">
				<div class="loading">Loading...</div>
			</div>

			<div class="stats" id="todo-stats"></div>
		</section>
	`}function pt(){return`
		<section class="card">
			<h2>Sticky Notes ‚Äî Batch Operations & Transactions</h2>
			<p class="subtitle">Demonstrates: <code>set([...])</code> batching, <code>db.write()</code> transactions</p>

			<div class="form-row">
				<input type="text" id="note-title" placeholder="Note title" />
				<input type="text" id="note-content" placeholder="Note content" />
				<select id="note-color">
					<option value="#fff3cd">üü° Yellow</option>
					<option value="#d1ecf1">üîµ Blue</option>
					<option value="#d4edda">üü¢ Green</option>
					<option value="#f8d7da">üî¥ Pink</option>
				</select>
				<button id="add-note" class="btn primary">Add Note</button>
			</div>

			<div class="action-row">
				<button id="load-sample-notes" class="btn secondary">Load Sample Notes (Batch)</button>
				<button id="clear-notes" class="btn danger">Clear All (Transaction)</button>
			</div>

			<div id="notes-grid" class="notes-grid">
				<div class="loading">Loading...</div>
			</div>
		</section>
	`}function ft(){return`
		<section class="card">
			<h2>Query Builder ‚Äî Advanced Queries</h2>
			<p class="subtitle">Demonstrates: <code>query()</code>, <code>where()</code>, <code>filter()</code>, <code>limit()</code>, <code>offset()</code></p>

			<div class="query-builder">
				<div class="query-row">
					<label>Filter by Priority:</label>
					<select id="query-priority">
						<option value="">All Priorities</option>
						<option value="high">üî¥ High Only</option>
						<option value="medium">üü° Medium Only</option>
						<option value="low">üü¢ Low Only</option>
					</select>
				</div>

				<div class="query-row">
					<label>Status:</label>
					<select id="query-status">
						<option value="">All Status</option>
						<option value="active">Active Only</option>
						<option value="completed">Completed Only</option>
					</select>
				</div>

				<div class="query-row">
					<label>Pagination:</label>
					<input type="number" id="query-limit" value="3" min="1" max="20" />
					<span>items per page</span>
					<button id="prev-page" class="btn small">‚Üê Prev</button>
					<span id="page-info">Page 1</span>
					<button id="next-page" class="btn small">Next ‚Üí</button>
				</div>

				<button id="run-query" class="btn primary">Run Query</button>
			</div>

			<div id="query-results" class="query-results">
				<p class="placeholder">Click "Run Query" to see results</p>
			</div>

			<div class="code-section">
				<h3>Generated Code</h3>
				<div id="query-code" class="code-block">
					<pre><code>// Query code will appear here</code></pre>
				</div>
			</div>
		</section>
	`}function gt(){return`
		<section class="card">
			<h2>Live Events ‚Äî Cross-Tab Synchronization</h2>
			<p class="subtitle">Demonstrates: <code>onChange()</code>, <code>BroadcastChannel</code> sync</p>

			<div class="info-box">
				<p>üì° <strong>Open this page in another browser tab</strong> and make changes.
				You'll see events appear here in real-time!</p>
				<p>üîµ <strong>LOCAL</strong> events are from this tab. üü† <strong>REMOTE</strong> events are from other tabs.</p>
			</div>

			<div class="action-row">
				<button id="trigger-add" class="btn secondary">Trigger Add Event</button>
				<button id="trigger-set" class="btn secondary">Trigger Set Event</button>
				<button id="trigger-remove" class="btn secondary">Trigger Remove Event</button>
				<button id="clear-log" class="btn danger">Clear Log</button>
			</div>

			<div id="event-log-content" class="event-log">
				<p class="placeholder">No events yet. Make some changes!</p>
			</div>
		</section>
	`}async function b(r="all"){const t=document.getElementById("todo-list"),e=document.getElementById("todo-stats");if(t)try{const s=await u.store("todos").all();let n;r==="all"?n=s:r==="completed"?n=s.filter(i=>i.completed):n=s.filter(i=>!i.completed);const o=[...n].sort((i,c)=>c.createdAt-i.createdAt);o.length===0?t.innerHTML=`<p class="empty">${r==="all"?"No todos yet. Add one above or load samples!":`No ${r} todos.`}</p>`:t.innerHTML=o.map(i=>`
				<div class="todo-item ${i.completed?"completed":""}" data-id="${i.id}">
					<input type="checkbox" ${i.completed?"checked":""} class="todo-toggle" />
					<span class="priority">${Q(i.priority)}</span>
					<span class="todo-title">${O(i.title)}</span>
					<span class="todo-date">${R(i.createdAt)}</span>
					<button class="delete-btn" title="Delete">√ó</button>
				</div>
			`).join("");const a=s.filter(i=>i.completed).length;e&&(e.innerHTML=`
				<span>üìä Total: <strong>${s.length}</strong></span>
				<span>‚úÖ Completed: <strong>${a}</strong></span>
				<span>‚è≥ Active: <strong>${s.length-a}</strong></span>
			`)}catch(s){t.innerHTML=`<p class="error">Error loading todos: ${String(s)}</p>`}}async function I(){const r=document.getElementById("notes-grid");if(r)try{const e=[...await u.store("notes").all()].sort((s,n)=>n.updatedAt-s.updatedAt);e.length===0?r.innerHTML='<p class="empty">No notes yet. Add one above or load samples!</p>':r.innerHTML=e.map(s=>`
				<div class="note-card" style="background-color: ${s.color}" data-id="${s.id}">
					<h3>${O(s.title)}</h3>
					<p>${O(s.content)}</p>
					<div class="note-footer">
						<span>${R(s.updatedAt)}</span>
						<button class="delete-note-btn" title="Delete">√ó</button>
					</div>
				</div>
			`).join("")}catch(t){r.innerHTML=`<p class="error">Error loading notes: ${String(t)}</p>`}}function wt(){switch(document.querySelectorAll(".tab").forEach(r=>{r.addEventListener("click",t=>{E=t.currentTarget.dataset.tab,G()})}),E){case"todos":bt();break;case"notes":vt();break;case"query":Et();break;case"events":At(),k();break}}function bt(){const r=async()=>{const t=document.getElementById("todo-title"),e=document.getElementById("todo-priority"),s=t.value.trim();s&&(await u.store("todos").add({id:D(),title:s,completed:!1,priority:e.value,createdAt:Date.now()}),t.value="",b())};document.getElementById("add-todo")?.addEventListener("click",()=>{r()}),document.getElementById("todo-title")?.addEventListener("keypress",t=>{t.key==="Enter"&&r()}),document.getElementById("load-samples")?.addEventListener("click",async()=>{await u.store("todos").set([...lt]),b()}),document.getElementById("clear-completed")?.addEventListener("click",async()=>{const e=(await u.store("todos").all()).filter(s=>s.completed).map(s=>s.id);e.length>0&&await u.store("todos").remove(e),b()}),document.getElementById("clear-todos")?.addEventListener("click",async()=>{await u.store("todos").clear(),b()}),document.querySelectorAll(".filter-btn").forEach(t=>{t.addEventListener("click",e=>{const s=e.currentTarget;document.querySelectorAll(".filter-btn").forEach(n=>n.classList.remove("active")),s.classList.add("active"),b(s.dataset.filter)})}),document.getElementById("todo-list")?.addEventListener("click",async t=>{const e=t.target,s=e.closest(".todo-item");if(!s)return;const n=s.dataset.id;if(n)if(e.classList.contains("todo-toggle")){const o=await u.store("todos").get(n);o&&(await u.store("todos").set({...o,completed:!o.completed}),b())}else e.classList.contains("delete-btn")&&(await u.store("todos").remove(n),b())})}function vt(){const r=async()=>{const t=document.getElementById("note-title"),e=document.getElementById("note-content"),s=document.getElementById("note-color"),n=t.value.trim()||"Untitled",o=e.value.trim()||"";await u.store("notes").add({id:D(),title:n,content:o,color:s.value,updatedAt:Date.now()}),t.value="",e.value="",I()};document.getElementById("add-note")?.addEventListener("click",()=>{r()}),document.getElementById("load-sample-notes")?.addEventListener("click",async()=>{await u.store("notes").set([...ut]),I()}),document.getElementById("clear-notes")?.addEventListener("click",async()=>{await u.write("notes",async t=>{await t.store("notes").clear()}),I()}),document.getElementById("notes-grid")?.addEventListener("click",async t=>{const e=t.target;if(!e.classList.contains("delete-note-btn"))return;const s=e.closest(".note-card");s?.dataset.id&&(await u.store("notes").remove(s.dataset.id),I())})}let w=0,B=0;function Et(){const r=async()=>{const t=document.getElementById("query-priority"),e=document.getElementById("query-status"),s=document.getElementById("query-limit"),n=document.getElementById("query-results"),o=document.getElementById("query-code"),a=t.value,i=e.value,c=parseInt(s.value,10)||3;let d=u.store("todos").query();const l=["db.store('todos').query()"];if(a&&(d=d.where("byPriority").equals(a),l.push(`  .where('byPriority').equals('${a}')`)),i){const p=i==="completed";d=d.filter(L=>L.completed===p),l.push(`  .filter(t => t.completed === ${String(p)})`)}if(B=(await d.toArray()).length,d=u.store("todos").query(),a&&(d=d.where("byPriority").equals(a)),i){const p=i==="completed";d=d.filter(L=>L.completed===p)}d=d.limit(c).offset(w*c),l.push(`  .limit(${c}).offset(${w*c})`),l.push("  .toArray()");const g=await d.toArray();n&&(g.length===0&&w===0?n.innerHTML='<p class="empty">No results found. Try loading sample todos first!</p>':g.length===0?n.innerHTML='<p class="empty">No more results on this page.</p>':n.innerHTML=`
					<table>
						<thead>
							<tr>
								<th>Title</th>
								<th>Priority</th>
								<th>Status</th>
								<th>Created</th>
							</tr>
						</thead>
						<tbody>
							${g.map(p=>`
								<tr class="${p.completed?"completed":""}">
									<td>${O(p.title)}</td>
									<td>${Q(p.priority)} ${p.priority}</td>
									<td>${p.completed?"‚úÖ Done":"‚è≥ Active"}</td>
									<td>${R(p.createdAt)}</td>
								</tr>
							`).join("")}
						</tbody>
					</table>
					<p class="result-count">Showing ${g.length} of ${B} total results</p>
				`);const j=document.getElementById("page-info");if(j){const p=Math.ceil(B/c)||1;j.textContent=`Page ${w+1} of ${p}`}o&&(o.innerHTML=`<pre><code>${l.join(`
`)}</code></pre>`)};document.getElementById("run-query")?.addEventListener("click",()=>{w=0,r()}),document.getElementById("prev-page")?.addEventListener("click",()=>{w>0&&(w--,r())}),document.getElementById("next-page")?.addEventListener("click",()=>{w++,r()}),r()}function At(){document.getElementById("trigger-add")?.addEventListener("click",async()=>{await u.store("todos").add({id:D(),title:`Event Test ${new Date().toLocaleTimeString()}`,completed:!1,priority:"low",createdAt:Date.now()})}),document.getElementById("trigger-set")?.addEventListener("click",async()=>{const r=await u.store("todos").all();if(r.length>0){const t=r[0];t&&await u.store("todos").set({...t,title:`Updated ${new Date().toLocaleTimeString()}`})}else await u.store("todos").set({id:D(),title:`Set Event ${new Date().toLocaleTimeString()}`,completed:!1,priority:"medium",createdAt:Date.now()})}),document.getElementById("trigger-remove")?.addEventListener("click",async()=>{const r=await u.store("todos").all();r.length>0&&r[0]&&await u.store("todos").remove(r[0].id)}),document.getElementById("clear-log")?.addEventListener("click",()=>{N.length=0,k()})}ht();G();</script>
  <style rel="stylesheet" crossorigin>*{box-sizing:border-box;margin:0;padding:0}:root{--primary: #4f46e5;--primary-hover: #4338ca;--danger: #dc2626;--danger-hover: #b91c1c;--warning: #f59e0b;--warning-hover: #d97706;--secondary: #6b7280;--secondary-hover: #4b5563;--success: #10b981;--bg: #f3f4f6;--card-bg: #ffffff;--text: #1f2937;--text-muted: #6b7280;--border: #e5e7eb;--radius: 8px;--shadow: 0 1px 3px rgba(0, 0, 0, .1);--shadow-lg: 0 4px 6px -1px rgba(0, 0, 0, .1)}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,sans-serif;background:var(--bg);color:var(--text);line-height:1.5;min-height:100vh}.container{max-width:900px;margin:0 auto;padding:20px}header{text-align:center;margin-bottom:24px}header h1{font-size:2rem;margin-bottom:8px;color:var(--primary)}header p{color:var(--text-muted)}footer{text-align:center;margin-top:32px;padding:16px;color:var(--text-muted);font-size:.875rem;background:#e0e7ff;border-radius:var(--radius)}.tabs{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap}.tab{padding:10px 20px;border:none;background:var(--card-bg);border-radius:var(--radius);cursor:pointer;font-size:.95rem;font-weight:500;transition:all .2s;box-shadow:var(--shadow)}.tab:hover{background:var(--border)}.tab.active{background:var(--primary);color:#fff}.card{background:var(--card-bg);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow-lg)}.card h2{margin-bottom:4px;font-size:1.5rem}.card .subtitle{color:var(--text-muted);margin-bottom:20px;font-size:.875rem}.card code{background:#f1f5f9;padding:2px 6px;border-radius:4px;font-size:.85rem;color:var(--primary)}.form-row,.action-row{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap}input[type=text],input[type=number],select{padding:10px 14px;border:1px solid var(--border);border-radius:var(--radius);font-size:.95rem;background:#fff;flex:1;min-width:120px}input[type=text]:focus,input[type=number]:focus,select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #4f46e51a}input[type=number]{width:80px;flex:none}.btn{padding:10px 18px;border:none;border-radius:var(--radius);font-size:.95rem;font-weight:500;cursor:pointer;transition:all .2s;white-space:nowrap}.btn.small{padding:6px 12px;font-size:.85rem}.btn.primary{background:var(--primary);color:#fff}.btn.primary:hover{background:var(--primary-hover)}.btn.secondary{background:var(--secondary);color:#fff}.btn.secondary:hover{background:var(--secondary-hover)}.btn.warning{background:var(--warning);color:#fff}.btn.warning:hover{background:var(--warning-hover)}.btn.danger{background:var(--danger);color:#fff}.btn.danger:hover{background:var(--danger-hover)}.filter-row{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap;align-items:center}.filter-btn{padding:6px 14px;border:1px solid var(--border);background:#fff;border-radius:20px;cursor:pointer;font-size:.875rem;transition:all .2s}.filter-btn:hover{background:var(--border)}.filter-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}.todo-list{max-height:400px;overflow-y:auto;border:1px solid var(--border);border-radius:var(--radius)}.todo-item{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid var(--border);transition:background .2s}.todo-item:last-child{border-bottom:none}.todo-item:hover{background:#f9fafb}.todo-item.completed .todo-title{text-decoration:line-through;color:var(--text-muted)}.todo-toggle{width:20px;height:20px;cursor:pointer;flex-shrink:0}.priority{font-size:1rem;flex-shrink:0}.todo-title{flex:1;font-size:.95rem}.todo-date{font-size:.75rem;color:var(--text-muted);flex-shrink:0}.delete-btn{width:28px;height:28px;border:none;background:transparent;color:var(--text-muted);font-size:1.2rem;cursor:pointer;border-radius:50%;transition:all .2s;flex-shrink:0}.delete-btn:hover{background:var(--danger);color:#fff}.stats{display:flex;gap:24px;padding-top:16px;border-top:1px solid var(--border);margin-top:16px;font-size:.875rem;color:var(--text-muted)}.stats strong{color:var(--text)}.notes-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-top:16px}.note-card{padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);transition:transform .2s,box-shadow .2s}.note-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}.note-card h3{font-size:1rem;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.note-card p{font-size:.875rem;color:#374151;margin-bottom:12px;max-height:60px;overflow:hidden}.note-footer{display:flex;justify-content:space-between;align-items:center;font-size:.75rem;color:var(--text-muted)}.delete-note-btn{width:24px;height:24px;border:none;background:#0000001a;border-radius:50%;cursor:pointer;font-size:1rem;line-height:1}.delete-note-btn:hover{background:var(--danger);color:#fff}.query-builder{background:#f8fafc;padding:20px;border-radius:var(--radius);margin-bottom:20px}.query-row{display:flex;align-items:center;gap:12px;margin-bottom:12px;flex-wrap:wrap}.query-row label{width:140px;font-weight:500;font-size:.875rem;flex-shrink:0}.query-row select{flex:none;width:180px}.query-results{min-height:100px;margin-bottom:20px}.query-results table{width:100%;border-collapse:collapse}.query-results th,.query-results td{padding:10px 12px;text-align:left;border-bottom:1px solid var(--border)}.query-results th{background:#f8fafc;font-weight:600;font-size:.875rem}.query-results td{font-size:.875rem}.query-results tr.completed td{color:var(--text-muted)}.result-count{margin-top:12px;font-size:.875rem;color:var(--text-muted)}.code-section h3{font-size:.95rem;margin-bottom:8px;color:var(--text-muted)}.code-block{background:#1e293b;color:#e2e8f0;padding:16px;border-radius:var(--radius);overflow-x:auto}.code-block pre{margin:0;font-family:Fira Code,Monaco,Consolas,monospace;font-size:.85rem;line-height:1.6}.info-box{background:#dbeafe;border:1px solid #93c5fd;padding:16px;border-radius:var(--radius);margin-bottom:20px}.info-box p{color:#1e40af;margin:0 0 8px}.info-box p:last-child{margin-bottom:0}.event-log{background:#1e293b;color:#e2e8f0;padding:16px;border-radius:var(--radius);max-height:400px;overflow-y:auto;font-family:Fira Code,Monaco,Consolas,monospace;font-size:.85rem}.event-list{list-style:none}.event-list li{padding:8px 12px;border-bottom:1px solid #334155;display:flex;gap:12px;align-items:center}.event-list li:last-child{border-bottom:none}.event-list li.local{border-left:3px solid #3b82f6}.event-list li.remote{border-left:3px solid #f59e0b;background:#f59e0b1a}.event-time{color:#94a3b8;font-size:.75rem}.event-source{font-weight:600;font-size:.75rem;padding:2px 6px;border-radius:4px}.event-list li.local .event-source{background:#3b82f6;color:#fff}.event-list li.remote .event-source{background:#f59e0b;color:#fff}.event-type{color:#22c55e}.event-store{color:#a78bfa}.event-keys{color:#94a3b8;font-size:.75rem}.loading{text-align:center;padding:40px;color:var(--text-muted)}.empty,.placeholder{text-align:center;padding:40px;color:var(--text-muted);font-style:italic}.error{color:var(--danger);text-align:center;padding:20px}@media(max-width:600px){.container{padding:12px}header h1{font-size:1.5rem}.tabs{gap:4px}.tab{padding:8px 12px;font-size:.85rem}.form-row{flex-direction:column}.form-row input,.form-row select{width:100%}.action-row{flex-direction:column}.action-row .btn{width:100%}.query-row{flex-direction:column;align-items:stretch}.query-row label,.query-row select{width:100%}.stats{flex-direction:column;gap:8px}}</style>
</head>
<body>
<div id="app"></div>
</body>
</html>
